<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="title" content="BuscaMiTarea.com" />
<meta name="description" content="Deja que busque la tarea por ti!." />
<link rel="image_src" href="images/fb.png" />
<link rel="icon" type="image/x-icon" href="images/favicon.png" />

<title>BuscaMiTarea.com | Busqueda en formato imprimible.</title>



<link rel="stylesheet" href="css/blueprint/screen.css" type="text/css" media="screen, projection"> 
<link rel="stylesheet" href="css/blueprint/print.css" type="text/css" media="print"> 
<!--[if lt IE 8]><link rel="stylesheet" href="css/blueprint/ie.css" type="text/css" media="screen, projection"><![endif]--> 

<link rel="stylesheet" href="css/style_fb.css" type="text/css" media="screen, projection"> 

<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript">
var type_file='wikipedia';
var url='site:es.wikipedia.org';
var config = {
	siteURL		: '',	// Change this to your site
	searchSite	: true,
	type		: 'web',
	append		: false,
	perPage		: 8,			// A maximum of 8 is allowed by Google
	page		: 0				// The start page
	}
	
function select_type(pos,type){
	type_file=type;
	if(type_file=="wikipedia"){
		url='site:es.wikipedia.org';
		}	
		else
			{
				url='';}
	var el = $('#flecha img');
	el.stop().animate({
				left		: el.position().left,
				marginRight	: pos
			});
}


$(document).ready(function(){
	

	
});


function googleSearch(settings){				
		settings = $.extend({},config,settings);	
		settings.term = settings.term || $('#id_busqueda').val();		
		if(settings.searchSite){			
			settings.term =url+' '+settings.term;
			if(url!="site:es.wikipedia.org"){settings.term=settings.term+' filetype:'+type_file;}
		}
		
		// URL of Google's AJAX search API
		var apiURL = 'http://ajax.googleapis.com/ajax/services/search/'+settings.type+'?v=1.0&callback=?';
		var resultsDiv = $('#resultados_content');
		
		$.getJSON(apiURL,{q:settings.term,rsz:settings.perPage,start:settings.page*settings.perPage},function(r){
			
			var results = r.responseData.results;
			$('#more').remove();
			
			if(results.length){
				
				// If results were returned, add them to a pageContainer div,
				// after which append them to the #resultsDiv:
				
				var pageContainer = $('<div>');
				
				$('#title_resultados').html('<h3>Resultados del termino '+$('#id_busqueda').val()+' en el formato .'+type_file+'</h3>');
				
				for(var i=0;i<results.length;i++){
					// Creating a new result object and firing its toString method:
					pageContainer.append(new result(results[i]) + '');
				}
				
				if(!settings.append){
					// This is executed when running a new search, 
					// instead of clicking on the More button:
					resultsDiv.empty();
				}
				
				pageContainer.append('<div class="clear"></div>')
							 .hide().appendTo(resultsDiv)
							 .fadeIn('slow');
				
				var cursor = r.responseData.cursor;
				
				// Checking if there are more pages with results, 
				// and deciding whether to show the More button:
				
				if( +cursor.estimatedResultCount > (settings.page+1)*settings.perPage){
					$('<div>',{id:'more'}).appendTo(resultsDiv).click(function(){
						googleSearch({append:true,page:settings.page+1});
						$(this).fadeOut();
					});
				}
			}
			else {
				
				// No results were found for this search.
				
				resultsDiv.empty();
				$('<p>',{className:'notFound',html:'No se encontraron resultados!'}).hide().appendTo(resultsDiv).fadeIn();
			}
		});
	}
	
	function result(r){
		
		// This is class definition. Object of this class are created for
		// each result. The markup is generated by the .toString() method.
		
		var arr = [];
		
		// GsearchResultClass is passed by the google API
		switch(r.GsearchResultClass){

			case 'GwebSearch':
				arr = [
					'<div id="result">',
					'<h4>',r.title,'</h4>',					
					'<div id="descripcion">',r.content,'</div>',
					'<div id="links"><div id="link_sitio"><a href="http://',r.visibleUrl,'" target="_blank">',r.visibleUrl,'</a></div>',
					'<a class="twitter" href="http://twitter.com/home?status=He%20encontrado%20mi%20tarea%20en%20BuscaMiTarea.com!%20%20%20http://buscamitarea.com/"><img src="images/twitter.png"/></a>',
					'<a class="facebook" href="http://www.facebook.com/share.php?u=http://buscamitarea.com/"><img src="images/facebook.png"/></a>',
                	'<div id="descarga"><a href="',r.unescapedUrl,'" target="_blank">Descarga!</a></div>',
                	'<div class="clear"></div>',            							
					'</div>'
				];
			break;			
		}
		
		// The toString method.
		this.toString = function(){
			return arr.join('');
		}
	}


</script>

</head>

<body>

<div id="publicidad_top" class="container">
</div>

<div id="buscador">
	<div id="logo">
    	<a href="index.html"><img src="images/logo.png" /></a>
    </div>
    <div id="tipo_busqueda">
    	<div id="tipos"> 
          <a onclick="select_type(308,'wikipedia'); return false;" href="/"><img src="images/wikipedia.png"/></a>
          <a onclick="select_type(248,'doc'); return false;" href="/"><img src="images/doc.png"/></a>
          <a onclick="select_type(188,'ppt'); return false;" href="/"><img src="images/ppt.png"/></a>
          <a onclick="select_type(128,'pdf'); return false;" href="/"><img src="images/pdf.png"/></a>
          <a onclick="select_type(68,'xls'); return false;" href="/"><img src="images/xls.png"/></a>
          <a onclick="select_type(8,'odt'); return false;" href="/"><img src="images/odt.png"/></a>
        </div>
<div id="flecha">
        	<img src="images/flecha.png"/>
        </div>
    </div>
    <div id="busqueda">
    	<input name="id_busqueda" type="text" id="id_busqueda" />
    	<a onclick="googleSearch();return false;" href="#"><img src="images/buscar_button.png" alt="buscar" /></a> 
    </div>
</div>

<div id="resultados" class="prepend-top">
	<div id="title_resultados" class="prepend-top" align="right">
    	
    </div>
    
  <div id="resultados_content">
    
    	
        
  </div>
    
</div>
<div align="center" id="footer" class="small">
<a href="http://oaxaca-digital.com" target="_blank"><img src="images/minilogo.png" width="21" height="16" alt="Oaxaca Digital" /></a><br />Powered by Oaxaca Digital | 2011
</div>

</body>
</html>
